(function(e){function t(t){for(var o,a,i=t[0],s=t[1],c=t[2],u=0,p=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(l,a)&&l[a]&&p.push(l[a][0]),l[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==l[s]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},l={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/interactive-map/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"014a":function(e,t,n){"use strict";n("8db7")},"034f":function(e,t,n){"use strict";n("85ec")},3737:function(e,t,n){"use strict";n("6791")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row",attrs:{id:"app"}},[n("h1",[e._v(e._s(e.msg))]),n("address-list",{attrs:{buildings:e.buildings}}),n("my-map",{directives:[{name:"show",rawName:"v-show",value:!e.mapToggle,expression:"!mapToggle"}],ref:"myMap",staticClass:"col-8 map-div",attrs:{buildings:e.buildings}}),n("my-plan",{directives:[{name:"show",rawName:"v-show",value:e.mapToggle,expression:"mapToggle"}],ref:"myPlan",staticClass:"col-8 map-div",attrs:{buildings:e.buildings}}),n("button",{on:{click:function(t){return t.preventDefault(),e.changeMap.apply(null,arguments)}}},[e._v("change map")])],1)},r=[],a=(n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card address-list col-4"},[n("ul",{staticClass:"list-group list-group-flush"},e._l(e.buildings,(function(t,o){return n("li",{key:o,staticClass:"list-group-item",attrs:{id:"buildingsList"},on:{mouseover:function(t){return e.changeLayerColor(t,o)},mouseout:function(t){return e.changeLayerColorBack(t,o)}}},[e._v(" "+e._s(t.name)),t.layer?[e._v(", "+e._s(t.layer._leaflet_id))]:e._e()],2)})),0),n("div",{staticClass:"add-to-list"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.elementToAdd,expression:"elementToAdd"}],attrs:{type:"text"},domProps:{value:e.elementToAdd},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addToList(e.elementToAdd)},input:function(t){t.target.composing||(e.elementToAdd=t.target.value)}}}),n("button",{on:{click:function(t){return e.addToList(e.elementToAdd)}}},[e._v("Ajouter")])])])}),i=[],s={name:"AddressList",props:["buildings"],data:function(){return{elementToAdd:""}},methods:{addToList:function(e){""!=this.elementToAdd&&(this.buildings.push({name:e,layer:null}),this.elementToAdd="")},changeLayerColor:function(e,t){var n=this.buildings[t].layer;null!=n&&void 0!=n._latlngs&&n.setStyle({fillColor:"red"})},changeLayerColorBack:function(e,t){var n=this.buildings[t].layer;null!=n&&void 0!=n._latlngs&&n.setStyle({fillColor:"blue"})}}},c=s,d=(n("014a"),n("2877")),u=Object(d["a"])(c,a,i,!1,null,"40f070ad",null),p=u.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("l-map",{ref:"myMap",attrs:{id:"map",zoom:e.zoom,center:e.center},on:{ready:e.onMapReady}},[n("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),n("l-control-fullscreen",{attrs:{position:"topright",options:{title:{false:"Open full screen",true:"Close full screen"}}}}),n("l-control-scale",{attrs:{position:"bottomright",imperial:!1,metric:!0}}),n("l-freedraw",{ref:"freeDraw",attrs:{mode:e.mode},on:{markers:function(t){return e.clearFreeDraw(t)}}})],1)],1)},f=[],g=(n("159b"),n("e11e")),h=n.n(g),y=n("2699"),b=n("a40a"),v=n("d371"),w=n("c222"),C=(n("845a"),n("a94e"),n("6817")),T=n("4c1c"),N=n("b85c"),O=(n("b0c0"),{methods:{indexOfBuildingName:function(e){for(var t=0;t<this.buildings.length;t++){var n=this.buildings[t];if(n.name==e)return t}return-1},updateBuildingsSelectors:function(e){for(var t=e.children,n=1;n<t.length;n++)null==this.buildings[this.indexOfBuildingName(t[n].textContent)].layer?t[n].hidden=!1:t[n].hidden=!0},createBuildingsSelector:function(e){var t,n,o=Object(N["a"])(this.buildings);try{for(o.s();!(n=o.n()).done;){var l=n.value;t=document.createElement("option"),t.className="buildings-option",t.appendChild(document.createTextNode(l.name)),e.appendChild(t)}}catch(r){o.e(r)}finally{o.f()}},initEvents:function(e){var t=this,n=document.createElement("select");n.className="buildings-selector form-select-sm";var o=document.createElement("option");o.hidden=!0,o.appendChild(document.createTextNode("Associer")),n.appendChild(o),this.createBuildingsSelector(n),n.addEventListener("change",(function(n){var o,l=n.target,r=-1,i=Object(N["a"])(t.buildings);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.layer==e&&(e.unbindTooltip(),s.layer=null)}}catch(c){i.e(c)}finally{i.f()}(r=t.indexOfBuildingName(l.options[l.selectedIndex].text))>=0&&(e.bindTooltip(t.buildings[r].name,{permanent:!0,className:"layout-label",direction:"center",style:"visibility: "+t.hidden}),e._tooltip._container.style.visibility=t.hidden,t.buildings[r].layer=e,a.style.display="initial")})),n.addEventListener("mouseenter",(function(e){t.updateBuildingsSelectors(e.target)})),this.map.on("layerremove",(function(e){var n,o=Object(N["a"])(t.buildings);try{for(o.s();!(n=o.n()).done;){var l=n.value;l.layer==e.layer&&(l.layer=null)}}catch(r){o.e(r)}finally{o.f()}}));var l=document.createElement("div");l.className="popup-div";var r=document.createElement("button");r.className="btn btn-outline-primary btn-sm",r.appendChild(document.createTextNode("Entrer")),r.addEventListener("click",(function(){console.log("[TODO] entrer function")}));var a=document.createElement("button");a.className="btn btn-outline-danger btn-sm",a.appendChild(document.createTextNode("DÃ©sassocier")),a.style.display="none",a.addEventListener("click",(function(){a.style.display="none",e.unbindTooltip();var n,o=Object(N["a"])(t.buildings);try{for(o.s();!(n=o.n()).done;){var l=n.value;l.layer==e&&(l.layer=null,t.$el.getElementsByClassName("buildings-selector")[0].selectedIndex=0)}}catch(r){o.e(r)}finally{o.f()}})),l.appendChild(document.createTextNode(e._leaflet_id)),l.appendChild(r),l.appendChild(n),l.appendChild(a),e.bindPopup(l)},clearFreeDraw:function(e){if("create"==e.eventType&&e.latLngs.length>0){var t=e.latLngs[0];this.freeDraw.clear();var n=this.l.polygon(t).addTo(this.map);this.initEvents(n),this.freeDrawControl.toggled()&&this.freeDrawControl.toggle(),this.freeDraw.mode(this.none)}},onMapReady:function(){this.map.pm.addControls({position:"topleft",drawCircle:!1,drawPolyline:!1,drawCircleMarker:!1,dragMode:!1,rotateMode:!1,cutPolygon:!1})},toggleHidden:function(){this.hidden="hidden"==this.hidden?"visible":"hidden"},buttonHideShowText:function(){return"hidden"==this.hidden?"show":"hide"}}});delete g["Icon"].Default.prototype._getIconUrl,g["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var D={name:"MyMap",mixins:[O],props:{buildings:{type:Array}},components:{LMap:y["a"],LTileLayer:b["a"],LControlScale:v["a"],"l-freedraw":C["a"],LControlFullscreen:w["a"]},data:function(){return{zoom:17,center:h.a.latLng(50.60810645746167,3.1448793411254887),url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',map:null,freeDraw:null,freeDrawControl:null,mode:T["NONE"],tooltipOptions:{permanent:!0},toolTipsControl:null,hidden:"visible",l:h.a,none:T["NONE"]}},methods:{},computed:{},mounted:function(){var e=this;this.map=this.$refs.myMap.mapObject,this.map.on("pm:create",(function(t){return e.initEvents(t.layer)})),this.$nextTick((function(){e.freeDraw=e.$refs.freeDraw.mapObject,e.freeDrawControl=e.map.pm.Toolbar.createCustomControl({name:"Draw Freely",title:"Draw Freely",className:"leaflet-pm-icon-freedraw",onClick:function(){e.freeDrawControl.toggled()?e.freeDraw.mode(T["NONE"]):e.freeDraw.mode(T["CREATE"])},actions:[{text:"Cancel",title:"Free Draw",onClick:function(){e.freeDraw.mode(T["NONE"]),e.freeDrawControl.toggle()}}]}),e.toolTipsControl=e.map.pm.Toolbar.createCustomControl({name:"Hide Tooltips",title:"Hide/Show",block:"custom",className:"leaflet-tooltip-control-hide-show leaflet-tooltip-control-hide",onClick:function(){var t=e.$el.getElementsByClassName("leaflet-tooltip-pane")[0].childNodes;e.toggleHidden(),t.forEach((function(t){t.style.visibility=e.hidden})),e.toolTipsControl.toggle();var n=e.$el.getElementsByClassName("leaflet-tooltip-control-hide-show")[0];n.className="control-icon leaflet-tooltip-control-hide-show leaflet-tooltip-control-"+e.buttonHideShowText()}})}))}},E=D,x=(n("3737"),Object(d["a"])(E,m,f,!1,null,null,null)),_=x.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("l-map",{ref:"myPlan",attrs:{id:"plan",zoom:e.zoom,center:e.center,crs:e.crs},on:{ready:e.onMapReady}},[n("l-image-overlay",{attrs:{url:e.imgUrl,bounds:e.bounds}}),n("l-control-fullscreen",{attrs:{position:"topright",options:{title:{false:"Open full screen",true:"Close full screen"}}}}),n("l-freedraw",{ref:"freeDraw",attrs:{mode:e.mode},on:{markers:function(t){return e.clearFreeDraw(t)}}})],1)],1)},M=[],L=n("e464");delete g["Icon"].Default.prototype._getIconUrl,g["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var S={name:"MyPlan",mixins:[O],props:{buildings:{type:Array}},components:{LMap:y["a"],"l-freedraw":C["a"],LImageOverlay:L["a"],LControlFullscreen:w["a"]},data:function(){return{zoom:-1,center:h.a.latLng(-278,344.5),imgUrl:"https://e7.pngegg.com/pngimages/314/132/png-clipart-floor-plan-architecture-facade-design-angle-building.png",bounds:[[0,0],[-556,689]],crs:h.a.CRS.Simple,map:null,freeDraw:null,freeDrawControl:null,mode:T["NONE"],tooltipOptions:{permanent:!0},toolTipsControl:null,hidden:"visible"}},methods:{},computed:{},mounted:function(){var e=this;this.map=this.$refs.myPlan.mapObject,this.map.on("pm:create",(function(t){return e.initEvents(t.layer)})),this.$nextTick((function(){e.freeDraw=e.$refs.freeDraw.mapObject,e.freeDrawControl=e.map.pm.Toolbar.createCustomControl({name:"Draw Freely",title:"Draw Freely",className:"leaflet-pm-icon-freedraw",onClick:function(){e.freeDrawControl.toggled()?e.freeDraw.mode(T["NONE"]):e.freeDraw.mode(T["CREATE"])},actions:[{text:"Cancel",title:"Free Draw",onClick:function(){e.freeDraw.mode(T["NONE"]),e.freeDrawControl.toggle()}}]}),e.toolTipsControl=e.map.pm.Toolbar.createCustomControl({name:"Hide Tooltips",title:"Hide/Show",block:"custom",className:"leaflet-tooltip-control-hide-show leaflet-tooltip-control-hide",onClick:function(){var t=e.$el.getElementsByClassName("leaflet-tooltip-pane")[0].childNodes;e.toggleHidden(),t.forEach((function(t){t.style.visibility=e.hidden})),e.toolTipsControl.toggle();var n=e.$el.getElementsByClassName("leaflet-tooltip-control-hide-show")[0];n.className="control-icon leaflet-tooltip-control-hide-show leaflet-tooltip-control-"+e.buttonHideShowText()}})}))}},j=S,A=(n("ad85"),Object(d["a"])(j,k,M,!1,null,null,null)),$=A.exports,P={name:"App",components:{"address-list":p,"my-map":_,"my-plan":$},methods:{changeMap:function(){var e=this;this.mapToggle?setTimeout((function(){e.$refs.myMap.map.invalidateSize()}),10):setTimeout((function(){e.$refs.myPlan.map.invalidateSize()}),10),this.mapToggle=!this.mapToggle,this.msg=(this.mapToggle?"Plan":"Map")+" using Vue2"}},data:function(){return{mapToggle:!1,msg:"Map using Vue2",buildings:[{name:"SN1",layer:null},{name:"SN2",layer:null},{name:"SN3",layer:null},{name:"A3",layer:null},{name:"M1",layer:null},{name:"M5",layer:null}]}}},B=P,F=(n("034f"),Object(d["a"])(B,l,r,!1,null,null,null)),H=F.exports;n("6cc5");o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(H)}}).$mount("#app")},6791:function(e,t,n){},"85ec":function(e,t,n){},"8db7":function(e,t,n){},ad85:function(e,t,n){"use strict";n("c3e0")},c3e0:function(e,t,n){}});
//# sourceMappingURL=app.fd5ab78f.js.map